{"$schema":"https://raw.githubusercontent.com/Microsoft/azure-pipelines-task-lib/master/tasks.schema.json","id":"e15848e4-4d49-4214-ba6d-7ec15f56197e","name":"DBojsenDataFactoryDeployment","friendlyName":"Deploy Data Factory from repo files","description":"Deploys Data Factory resources directly from the json documents in your code repo","helpUrl":"https://github.com/DBojsen/Azure-Data-Factory-CI-CD-tools/issues","category":"Azure Pipelines","author":"David Bojsen","version":{"Major":"0","Minor":"9","Patch":"7"},"instanceNameFormat":"Deploy Data Factory content ($(DataFactoryResourceName))","groups":[{"displayName":"Advanced settings - Linked Services","isExpanded":false,"name":"AdvancedLS"},{"displayName":"Advanced settings - Triggers","isExpanded":false,"name":"AdvancedTR"},{"displayName":"Advanced settings - Self Hosted Integration Runtimes","isExpanded":false,"name":"AdvancedSHIR"}],"inputs":[{"name":"connectedServiceNameARM","aliases":["azureSubscription"],"type":"connectedService:AzureRM","label":"Azure Resource Manager connection","required":true,"helpMarkDown":"Select an Azure Resource Manager service connection for the deployment","properties":{"EndpointFilterRule":""}},{"name":"DataFactorySubscriptionId","type":"string","label":"The Subscription Id your Data Factory instance is in","required":true,"helpMarkDown":"Get it from the Azure Portal"},{"name":"DataFactoryResourceGroupName","type":"string","label":"The Resource Group Name your Data Factory instance is in","required":true,"helpMarkDown":"Get it from the Azure Portal"},{"name":"DataFactoryResourceName","type":"string","label":"The name of your Data Factory instance","required":true,"helpMarkDown":"Get it from the Azure Portal"},{"name":"RepoPath","type":"filePath","label":"Where on the build agent will we find the Data Factory folder?","defaultValue":"$(System.ArtifactsDirectory)\\ADF","required":true,"helpMarkDown":"Is usually something like $(System.ArtifactsDirectory)\\ADF"},{"name":"removeobsoleteartifacts","type":"boolean","label":"Should we remove artifacts that are no longer in the repo","defaultValue":true,"required":true,"helpMarkDown":""},{"name":"triggerReplacementType","type":"pickList","label":"Replace trigger values?","defaultValue":"off","options":{"off":"Do not replace trigger values","inline":"Replace with inline values","file":"Replace with JSON array from file"},"groupName":"AdvancedTR","helpMarkDown":"See [documentation](https://dbojsen.github.io/Azure-Data-Factory-CI-CD-tools/Deployment/deployment-advanced.html#span-stylecolordarkcyanreplace-values-in-trigger-definitionsspan) for more info"},{"name":"triggerreplacements","type":"multiLine","label":"JSON array with properties that should be replaced in trigger definitions such as scope","defaultValue":"[]","required":false,"groupName":"AdvancedTR","helpMarkDown":"Must be a valid JSON array, see [documentation](https://dbojsen.github.io/Azure-Data-Factory-CI-CD-tools/Deployment/deployment-advanced.html#span-stylecolordarkcyanreplace-values-in-trigger-definitionsspan) for more info","visibleRule":"triggerReplacementType == inline","properties":{"maxLength":"200"}},{"name":"triggerreplacementsFile","type":"filePath","label":"Where on the build agent will we find the JSON file with properties that should be replaced in trigger definitions such as scope","defaultValue":"$(System.ArtifactsDirectory)\\ADF\\TriggerReplacementsENV.json","required":false,"groupName":"AdvancedTR","helpMarkDown":"Must be a valid JSON array, see [documentation](https://dbojsen.github.io/Azure-Data-Factory-CI-CD-tools/Deployment/deployment-advanced.html#span-stylecolordarkcyanreplace-values-in-trigger-definitionsspan) for more info","visibleRule":"triggerReplacementType == file"},{"name":"linkedservicereplacementsType","type":"pickList","label":"Replace linked service values?","defaultValue":"off","options":{"off":"Do not replace linked service values","inline":"Replace with inline values","file":"Replace with JSON array from file"},"groupName":"AdvancedLS","helpMarkDown":"See [documentation](https://dbojsen.github.io/Azure-Data-Factory-CI-CD-tools/Deployment/deployment-advanced.html#span-stylecolordarkcyanreplace-values-in-linked-service-definitionsspan) for more info"},{"name":"linkedservicereplacements","type":"multiLine","label":"JSON array with properties that should be replaced in linked service definitions such as url, username.  Recommended to use KeyVault secrets instead","defaultValue":"[]","required":false,"groupName":"AdvancedLS","helpMarkDown":"Must be a valid JSON array, see [documentation](https://dbojsen.github.io/Azure-Data-Factory-CI-CD-tools/Deployment/deployment-advanced.html#span-stylecolordarkcyanreplace-values-in-linked-service-definitionsspan) for more info","visibleRule":"linkedservicereplacementsType == inline","properties":{"maxLength":"200"}},{"name":"linkedservicereplacementsFile","type":"filePath","label":"Where on the build agent will we find the JSON file with properties that should be replaced in linked service definitions such as url, username.  Recommended to use KeyVault secrets instead","defaultValue":"$(System.ArtifactsDirectory)\\ADF\\LinkedServiceReplacementsENV.json","required":false,"groupName":"AdvancedLS","helpMarkDown":"Must be a valid JSON array, see [documentation](https://dbojsen.github.io/Azure-Data-Factory-CI-CD-tools/Deployment/deployment-advanced.html#span-stylecolordarkcyanreplace-values-in-linked-service-definitionsspan) for more info","visibleRule":"linkedservicereplacementsType == file"},{"name":"KeyVaultLSgtOne","type":"radio","label":"Do you have more than one Key Vault linked service?","defaultValue":"no","required":true,"groupName":"AdvancedLS","helpMarkDown":"Please indicate if you have more than one Key Vault linked service in your environment, see [documentation](https://dbojsen.github.io/Azure-Data-Factory-CI-CD-tools/Deployment/deployment-advanced.html#span-stylecolordarkcyanmap-names-of-key-vault-linked-servicesspan) for more info","options":{"yes":"Yes","no":"No"}},{"name":"KeyVaultLSNamedSame","type":"radio","label":"Are they named the same in all environments?","defaultValue":"yes","required":true,"groupName":"AdvancedLS","helpMarkDown":"Please indicate if they have the same name in each environment, see [documentation](https://dbojsen.github.io/Azure-Data-Factory-CI-CD-tools/Deployment/deployment-advanced.html#span-stylecolordarkcyanmap-names-of-key-vault-linked-servicesspan) for more info","visibleRule":"KeyVaultLSgtOne == yes","options":{"yes":"Yes","no":"No"}},{"name":"KeyVaultMappingType","type":"pickList","label":"You must provide a mapping table for the Key Vault linked services, how do you want to provide it?","defaultValue":"inline","options":{"inline":"Replace with inline values","file":"Replace with JSON array from file"},"groupName":"AdvancedLS","helpMarkDown":"To make sure the deployment doesn't fail, please provide a mapping table for the Key Vault LS's (Must be a valid JSON array), see [documentation](https://dbojsen.github.io/Azure-Data-Factory-CI-CD-tools/Deployment/deployment-advanced.html#span-stylecolordarkcyanmap-names-of-key-vault-linked-servicesspan) for more info","visibleRule":"KeyVaultLSNamedSame == no"},{"name":"KeyVaultMapping","type":"multiLine","label":"JSON array with mapping between Key Vault name in repo files and in environment","defaultValue":"[\r\n\t{ \"KeyVaultLSNameInRepo\" : \"KeyVaultLSNameInCurrentEnvironment\" }\r\n]","required":false,"groupName":"AdvancedLS","helpMarkDown":"Must be a valid JSON array, see [documentation](https://dbojsen.github.io/Azure-Data-Factory-CI-CD-tools/Deployment/deployment-advanced.html#span-stylecolordarkcyanmap-names-of-key-vault-linked-servicesspan) for more info","visibleRule":"KeyVaultMappingType == inline","properties":{"maxLength":"200"}},{"name":"KeyVaultMappingFile","type":"filePath","label":"Where on the build agent will we find the JSON file with the KeyVault Linked Service names mapping table?","defaultValue":"$(System.ArtifactsDirectory)\\ADF\\KeyVaultMappingENV.json","required":false,"groupName":"AdvancedLS","helpMarkDown":"Must be a valid JSON array, see [documentation](https://dbojsen.github.io/Azure-Data-Factory-CI-CD-tools/Deployment/deployment-advanced.html#span-stylecolordarkcyanmap-names-of-key-vault-linked-servicesspan) for more info","visibleRule":"KeyVaultMappingType == file"},{"name":"SHIRgtOne","type":"radio","label":"Do you have more than one Self Hosted Integration Runtime (SHIR)?","defaultValue":"no","required":true,"groupName":"AdvancedSHIR","helpMarkDown":"Please indicate if you have more than one SHIR in your environment, see [documentation](https://dbojsen.github.io/Azure-Data-Factory-CI-CD-tools/Deployment/deployment-advanced.html#span-stylecolordarkcyanreplace-shir-namesspan) for more info","options":{"yes":"Yes","no":"No"}},{"name":"SHIRNamedSame","type":"radio","label":"Are they named the same in all environments?","defaultValue":"yes","required":true,"groupName":"AdvancedSHIR","helpMarkDown":"Please indicate if they have the same name in each environment, see [documentation](https://dbojsen.github.io/Azure-Data-Factory-CI-CD-tools/Deployment/deployment-advanced.html#span-stylecolordarkcyanreplace-shir-namesspan) for more info","visibleRule":"SHIRgtOne == yes","options":{"yes":"Yes","no":"No"}},{"name":"SHIRMappingType","type":"pickList","label":"You must provide a mapping table for the SHIRs, how do you want to provide it?","defaultValue":"inline","options":{"inline":"Replace with inline values","file":"Replace with JSON array from file"},"groupName":"AdvancedSHIR","helpMarkDown":"To make sure the deployment doesn't fail, please provide a mapping table for the SHIRs (Must be a valid JSON array), see [documentation](https://dbojsen.github.io/Azure-Data-Factory-CI-CD-tools/Deployment/deployment-advanced.html#span-stylecolordarkcyanreplace-shir-namesspan) for more info","visibleRule":"SHIRNamedSame == no"},{"name":"SHIRMapping","type":"multiLine","label":"JSON array with mapping between SHIR name in repo files and in environment","defaultValue":"[\r\n\t{ \"SHIRNameInRepo\" : \"SHIRNameInCurrentEnvironment\" }\r\n]","required":false,"groupName":"AdvancedSHIR","helpMarkDown":"Must be a valid JSON array, see [documentation](https://dbojsen.github.io/Azure-Data-Factory-CI-CD-tools/Deployment/deployment-advanced.html#span-stylecolordarkcyanreplace-shir-namesspan) for more info","visibleRule":"SHIRMappingType == inline","properties":{"maxLength":"200"}},{"name":"SHIRMappingFile","type":"filePath","label":"Where on the build agent will we find the JSON file with the SHIR names mapping table?","defaultValue":"$(System.ArtifactsDirectory)\\ADF\\KeyVaultMappingENV.json","required":false,"groupName":"AdvancedSHIR","helpMarkDown":"Must be a valid JSON array, see [documentation](https://dbojsen.github.io/Azure-Data-Factory-CI-CD-tools/Deployment/deployment-advanced.html#span-stylecolordarkcyanreplace-shir-namesspan) for more info","visibleRule":"SHIRMappingType == file"}],"execution":{"PowerShell3":{"target":"deploy.ps1","argumentFormat":""}}}
