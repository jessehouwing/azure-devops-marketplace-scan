{
  "id": "ee92c9b0-fe0d-11ec-b2f9-b5eda8a707d8",
  "name": "BicepTemplateDeployment",
  "friendlyName": "Bicep Template Deployment",
  "description": "Deploys bicep template",
  "author": "RedValkyrie",
  "helpMarkDown": "",
  "category": "Utility",
  "visibility": ["Build", "Release"],
  "demands": [],
  "version": {
    "Major": "1",
    "Minor": "0",
    "Patch": "9"
  },
  "instanceNameFormat": "Bicep Template Deployment $(message)",
  "groups": [
    {
      "name": "TargetScopeLocation",
      "displayName": "Target Scope Location",
      "isExpanded": true,
      "visibleRule": "deploymentScope == Subscription"
    },
    {
      "name": "TargetScopeResourceGroup",
      "displayName": "Target Scope Resource Group",
      "isExpanded": true,
      "visibleRule": "deploymentScope == ResourceGroup"
    }
  ],
  "inputs": [
    {
      "name": "ConnectedServiceNameARM",
      "aliases": ["azureSubscription"],
      "type": "connectedService:AzureRM",
      "label": "Azure Subscription",
      "defaultValue": "",
      "required": true,
      "helpMarkDown": "Azure Resource Manager subscription to configure before running PowerShell"
    },
    {
      "name": "deploymentScope",
      "type": "pickList",
      "label": "Deployment Scope",
      "required": true,
      "defaultValue": "",
      "options": {
        "Subscription": "Subscription",
        "ResourceGroup": "ResourceGroup"
      },
      "helpMarkDown": "Select your deployment scope"
    },
    {
      "name": "resourceGroupName",
      "type": "string",
      "label": "ResourceGroup Name",
      "defaultValue": "",
      "required": true,
      "groupName": "TargetScopeResourceGroup",
      "helpMarkDown": "Resource Group where resources will be deployed"
    },
    {
      "name": "location",
      "type": "string",
      "label": "Location",
      "defaultValue": "",
      "groupName": "TargetScopeLocation",
      "required": true,
      "helpMarkDown": "Location where resources will be deployed"
    },
    {
      "name": "bicepLocation",
      "type": "filePath",
      "label": "Bicep template location",
      "defaultValue": "",
      "required": true,
      "helpMarkDown": "Bicep template location"
    },
    {
      "name": "bicepParameters",
      "type": "filePath",
      "label": "Bicep parameters location",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "Bicep parameters location"
    },
    {
      "name": "deployMethod",
      "type": "pickList",
      "label": "DeployMethod",
      "required": false,
      "defaultValue": "",
      "options": {
        "validate": "validate",
        "deploy": "deploy"
      },
      "helpMarkDown": "Select the deployment method"
    }
  ],
  "execution": {
    "PowerShell3": {
      "target": "deploy.ps1"
    }
  }
}
